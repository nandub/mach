2006-03-23  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  remove an unused expand function, and rename some expand vars

2006-03-19  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  make "mach clean" check for and clean both the root dir and state dir

2006-03-17  Thomas Vander Stichele  <thomas at apestaart dot org>

	* configure.in:
	* etc/dist.d/Makefile.am:
	* etc/dist.d/fedora-5-i386:
	* etc/dist.d/fedora-5-x86_64:
	  add fedora core 5

2006-03-10  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  make update_local_repo a method on Root

2006-01-23  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  os.path.sep did not exist in python 2.2, while os.sep did

2006-01-22  Thomas Vander Stichele  <thomas at apestaart dot org>

	* configure.in:
	  time for a prerelease

2006-01-22  Thomas Vander Stichele  <thomas at apestaart dot org>

	* HACKING:
	* scripts/mach.in:
	  do gpg clearsigning of md5sum only if both gpg and md5sum
	  requested, and after generating the md5sum

2006-01-22  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  remove unused code that extracted an rpm binary from
	  an rpm-*.rpm

2006-01-22  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  remove code marked for deletion

2006-01-22  Thomas Vander Stichele  <thomas at apestaart dot org>

	* HACKING:
	  more updates
	* etc/conf.in:
	  remove packages, and rename archives to aptarchives
	* scripts/mach.in:
	  small cleanups
	  use aptarchives where appropriate

2006-01-22  Thomas Vander Stichele  <thomas at apestaart dot org>

	patch by: Matthias Saou

	* scripts/mach.in:
	  only write md5sum when requested with -m or --md5sum

2006-01-22  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  - pass 'buildopts' from config to Spec and SRPM init's, so they
	    also are used when parsing with rpmbuild
	  - since the locally built repositories are per-flavor, include
	    the flavor in the name of the repository: local.(flavor)
	  - factor out code into an update_local_repo () method
	  - add an error in case 'cache' is not found in config['dirs']

2006-01-22  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  rename join_quoted to join_single_quoted

2006-01-22  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/dist.d/fedora-2-x86_64:
	* etc/dist.d/fedora-3-x86_64:
	* etc/dist.d/fedora-4-x86_64:
	* etc/dist.d/fedora-development-x86_64:
	* scripts/mach.in:
	  add an excludearch config property, lists archs to exclude from
	  yum config; needs a mach clean to be activated
	  See https://www.redhat.com/archives/fedora-extras-list/2005-May/msg00479.html

2006-01-21  Thomas Vander Stichele  <thomas at apestaart dot org>

	* configure.in:
	  fix STATESDIR define
	* mach.spec.in:
	  small fix
	* etc/conf.in:
	  add ['dirs']['cache']
	* scripts/mach.in:
	  clean out yum metadata from cache for "local" archive;
	  fixes builds of packages depending on previously built packages
	  (yum was not picking up the newly built packages on update)
	* src/mach-helper.c: (do_rm_cache_file), (do_rm_root_dir), (do_rm):
	  allow for removing files from LOCALSTATEDIR/cache

2005-12-16  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/dist.d/Makefile.am:
	* etc/dist.d/fedora-1-i386:
	* etc/dist.d/fedora-2-i386:
	* etc/dist.d/fedora-2-x86_64:
	* etc/dist.d/fedora-3-i386:
	* etc/dist.d/fedora-3-x86_64:
	* etc/dist.d/fedora-4-i386:
	* etc/dist.d/fedora-4-x86_64:
	* etc/dist.d/fedora-development-i386:
	* etc/dist.d/fedora-development-x86_64:
	  update development dist files
	  dist the 64 bit ones
	  update the 'dir' parameter
	* scripts/mach.in:
	  store the cache of yum/apt in a per-dist place; shared by all
	  flavors of a base dist

=== release 0.4.8 ===

2005-11-21  Thomas Vander Stichele  <thomas at apestaart dot org>

	*  configure.ac: Releasing 0.4.8, "More Than One"

2005-11-18  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  Do a dirty little hack for FC3-on-FC4 to make coreutils installs
	  work.  Mmmm, dirty little hacks.

2005-11-18  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  Fix not correctly using the login'd tempname for src.rpm

2005-11-16  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  two different users in the mach group can now build the same
	  spec file one after an another.  Looks like multi-user should
	  now work.  We do this by making sure all files are group-writable
	  and owned by the "mach" group, which gets the same gid as the host's
	  mach group.

2005-11-16  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  remove dead code
	  use more os.path.join

2005-11-14  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  use default root from configure.ac

2005-11-14  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/dist.d/fedora-1-i386:
	* etc/dist.d/fedora-2-i386:
	* etc/dist.d/fedora-3-i386:
	* etc/dist.d/fedora-4-i386:
	  Give up on gcc-c++

2005-09-08  Thomas Vander Stichele  <thomas at apestaart dot org>

	* mach.spec.in:
	  require createrepo
	* scripts/mach.in:
	  fix a non-existing exception

2005-08-01  Thomas Vander Stichele  <thomas at apestaart dot org>

	* configure.in:
	  back to head
	* etc/dist.d/fedora-2-x86_64:
	* etc/dist.d/fedora-3-x86_64:
	* etc/dist.d/fedora-4-x86_64:
	* etc/dist.d/fedora-development-x86_64:

=== release 0.4.7 ===

2005-07-03  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  upgrade packages before taking the build snapshot, this fixes
	  mach trying to remove the upgraded packages when reverting

2005-06-15  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/dist.d/fedora-4-i386:
	  fix livna
	* mach.spec.in:
	  set default flavor to extras

2005-06-13  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/dist.d/fedora-3-i386:
	* etc/dist.d/fedora-4-i386:
	* scripts/mach.in:
	  add "buildopts" config param which allows passing of
	  additional flags to the rpm build step (like, say, 'dist')
	  and use it for fedora extras

2005-06-12  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/dist.d/fedora-3-i386:
	* etc/dist.d/fedora-4-i386:
	  adding yum sources
	* etc/location:
	  change gstreamer canonical location
	* scripts/mach.in:
	  use queryformat when figuring out build order
	  give full output of tools, as if interactive, when running with
	  debug
	  properly write config for 'local' packages in the yum case
	* src/mach-helper.c: (do_command), (do_chroot), (do_mknod),
	(do_env), (main):
	  add back env (which was used for testing), but only without
	  arguments
	* src/selinux-mach.c:
	  add prototype for another selinux-related function that
	  might need to be replaced - see
	  http://savannah.nongnu.org/cgi-bin/viewcvs/util-vserver/util-vserver/src/rpm-fake.c?rev=1.31&content-type=text/vnd.viewcvs-markup

2005-06-12  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/dist.d/fedora-3-i386:
	* etc/location:
	  add and use fedorayum base location
	* src/mach-helper.c: (do_chroot), (do_mknod), (main):
	  allow mknod /dev/zero 
	* scripts/mach.in:
	  add support for yum
	  add 'installer' config option for either yum or apt-get
	  use a sources dict instead so we can provide the repo.d files
	  with names
	  create /dev/zero in the root
	  enable caching of packages for yum

2005-06-12  Thomas Vander Stichele  <thomas at apestaart dot org>

	* src/mach-helper.c: (main):
	  remove env, it's a security problem

2005-06-11  Thomas Vander Stichele  <thomas at apestaart dot org>

	* mach.spec.in:
	  require yum instead of apt
	* scripts/mach.in:
	  factor out check_user()
	  run it before starting interpreter
	* src/mach-helper.c:
	  add string.h include

2005-06-11  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/dist.d/Makefile.am:
	* etc/dist.d/fedora-4-i386:
	* configure.in:
	  add fc4
	* mach.spec.in:
	  add buildreqs
	* scripts/mach.in:
	  add yum as an allowed command
	  add an installer config var
	  make /dev/null a little better
	  differentiate between su and runuser when debugging

2005-01-28  Thomas Vander Stichele  <thomas at apestaart dot org>

	* src/mach-helper.c: (do_yum), (main):
	  add yum -c ... --installroot=... install

2004-11-20  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  comment fix.  Check for runuser presence

2004-11-08  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/dist.d/fedora-3-i386:
	  Only use runuser in the fc3 configs of course

2004-11-08  Thomas Vander Stichele  <thomas at apestaart dot org>

	* autogen.sh:
	* configure.in:
	  detect selinux
	* mach.spec.in:
	* src/Makefile.am:
	* src/selinux-mach.c:
	  create a fake selinux library
	* src/mach-helper.c:
	  if MACH_LD_PRELOAD is set, add our selinux lib to LD_PRELOAD

2004-11-08  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  try harder when rpm -e fails by adding noscripts

2004-11-07  Thomas Vander Stichele  <thomas at apestaart dot org>

	patch by: Rudi Chiarito

	* scripts/mach.in:
	  Add runuser support/config, needed for FC3
	  Clean up some broken indentation I accidentally committed

2004-11-07  Thomas Vander Stichele  <thomas at apestaart dot org>

	* configure.in:
	* etc/dist.d/Makefile.am:
	* etc/dist.d/fedora-3-i386:
	  Adding Fedora Core 3 dist file and detection

2004-11-06  Thomas Vander Stichele  <thomas at apestaart dot org>

	patch by: Rudi Chiarito

	* scripts/mach.in:
	  Create /dev/null when preparing root

2004-11-06  Thomas Vander Stichele  <thomas at apestaart dot org>

	patch by: Rudi Chiarito

	* scripts/mach.in:
	  Remove all matches of a package when removing packages

2004-11-06  Thomas Vander Stichele  <thomas at apestaart dot org>

	* .cvsignore:
	* autogen.sh:
	* configure.in:
	* src/Makefile.am:
	* src/mach-helper.c:
	  use config.h for all defines

2004-11-06  Thomas Vander Stichele  <thomas at apestaart dot org>

	patch by: Rudi Chiarito

	* src/mach-helper.c:
	  Allow creation of /dev/null in the root

2004-08-20  Ville Skyttä  <ville dot skytta at iki dot fi>

	* scripts/mach.in: Improve error messages when loading config
	files fail.

	* mach.spec.in: Create only the "mach" group, and do not remove
	it on erase.  The "mach" user is not really needed for anything.

2004-07-29  Thomas Vander Stichele  <thomas at apestaart dot org>

	patch by: Jeff Pitman

	* scripts/mach.in: fix munging of filenames after collect

2004-07-29  Thomas Vander Stichele  <thomas at apestaart dot org>

	patch by: Jeff Pitman

	* scripts/mach.in:
	  use --use-agent for clearsigning md5sums

2004-07-29  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  fix and comment release mangling, don't touch it anymore now.

2004-07-27  Ville Skyttä  <ville dot skytta at iki dot fi>

	* scripts/mach.in (_setup_prep): Set Archive-Cleanup in apt.conf
	to false in order to prevent apt > 0.5.15cnc6's "smart archive
	cleaner" from removing cached packages.  Thanks to Panu Matilainen.

	* etc/dist.d/*: Remove rpm-devel from all "build" package sets.

	* etc/dist.d/suse-*: Remove everything but base, security and
	update components (ie. the "full" flavour no longer exists).
	Other components change and disappear too often to be useful here.

2004-07-10  Ville Skyttä  <ville dot skytta at iki dot fi>

	* scripts/mach.in: Fix urlgrab exception handling and syntax,
	we may get a HTTPException which does not fit into a 2-tuple.

2004-07-05  Ville Skyttä  <ville dot skytta at iki dot fi>

	* etc/dist.d/Makefile.am: Include suse-90-i386 in dist.

2004-07-05  Thomas Vander Stichele  <thomas at apestaart dot org>

	* configure.in:
	  bump nano to 1 for development

=== release 0.4.6 ===

2004-07-05  Thomas Vander Stichele  <thomas at apestaart dot org>

	* configure.in:
	  releasing 0.4.6, "Lenrek"

2004-07-05  Thomas Vander Stichele  <thomas at apestaart dot org>

	* m4/as-ac-expand.m4:
	  sync with upstream updates
	* README:
	  add note for FC2 users building FC1
	* scripts/mach.in:
	  fixed sed for mangling so that trailing spaces are caught
	  write proper /boot/kernel.h

2004-05-29  Ville Skyttä  <ville dot skytta at iki dot fi>

	* m4/as-ac-expand.m4: Avoid aclocal >= 1.8 warnings.

2004-05-18  Ville Skyttä  <ville dot skytta at iki dot fi>

	* etc/location, etc/dist.d/redhat-*, etc/dist.d/fedora-*:
	Improve JPackage configs.

2004-05-17  Thomas Vander Stichele  <thomas (at) apestaart (dot) org>

	* TODO:
	* configure.in:
	* etc/dist.d/Makefile.am:
	* etc/dist.d/fedora-2-i386:
          add Fedora Core 2

2004-05-09  Thomas Vander Stichele  <thomas at apestaart dot org>

	patch by: Panu Matilainen

	* scripts/mach.in:
          check for errors on URL retrieving

2004-05-05  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/dist.d/fedora-development-i386:
          add fedora.us/livna
	* mach.spec.in:
          add rpmbuild since we use it for expanding
	* scripts/mach.in:
          add a debug statement

2004-04-15  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: remove the buildrequire checking commands, since
          they make the build fail if an older package than the buildrequires
          ask for is already present

2004-04-14  Ville Skyttä  <ville dot skytta at iki dot fi>

	* mach.spec.in: Own %{_localstatedir}/mach, thanks to
	John Dalbec for the catch.

2004-04-08  Ville Skyttä  <ville dot skytta at iki dot fi>

	* mach.spec.in, README: We require apt >= 0.5.5cnc2 due to
	use of the "rpm-dir" index type.

2004-04-06  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: patch from Jeff Pitman to only add
          local built apt repository after build stage

2004-04-03  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/dist.d/davedina: fix description

2004-04-01  Ville Skyttä  <ville dot skytta at iki dot fi>

	* scripts/mach.in (_setup_build): Use "x" instead of "!!" in
	the builder passwd entry to appease eg. SuSE 9.

	* etc/dist.d/suse-90-i386: Add SuSE 9 config.

2004-03-28  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: reworked and applied patch from Dams

2004-03-24  Ville Skyttä  <ville dot skytta at iki dot fi>

	* scripts/mach.in: Include dist.d snippets in alphabetical order.

	* scripts/mach.in: Ignore also #* in dist.d.

2004-03-23  Noa Resare  <noa at resare dot com>

	* scripts/mach.in (_setup_prep): Point Dir::Bin::scripts to
	/dev/null in the default apt configuration to avoid hangs caused
	eg. by first-time druids which expect input from stdin.

2004-03-20  Ville Skyttä  <ville dot skytta at iki dot fi>

	* scripts/mach.in: Skip various backup files when pulling in
	dist.d snippets.

	* etc/dist.d/suse-82-i386: Bring up to date.
	* etc/dist.d/suse-81-i386: Ditto.

	* etc/location, etc/dist.d/cnc-9-i386: Fix Conectiva configs.

=== release 0.4.5 ===

2004-03-18  Thomas Vander Stichele  <thomas at apestaart dot org>

	* configure.in: release 0.4.5, "Snow"

2004-03-18  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: implemented -v by popular demand

2004-03-18  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: make sure SRPM and Spec classes always pass
          the quoted options string passed for build, so parsing them
           doesn't fail on e.g. ExclusiveArch:

2004-03-18  Thomas Vander Stichele  <thomas at apestaart dot org>

	* m4/as-version.m4: sync with upstream, fixes release tag for snaps

2004-03-18  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: make sure build options are passed to rpmbuild
          when checking sources/patches.  Fixes error when parsing specs
          with ExclusiveArch:

2004-03-17  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: override _tmpdir as well when setting topdir
          during buildrequires check (Matthias Saou)

2004-03-16  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: when checking for buildrequires, use topdir
          to make it check for Sources: and Patches: in the root

2004-03-16  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: clean up temp dir after finding build results

2004-03-16  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: fix proper mounting and umounting (Enrico Scholz)

2004-03-16  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: create /boot/kernel.h and make it throw an error
          when included (Enrico Scholz)

2004-03-16  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
          remove proxy from generated apt.conf so system proxy can be used
          add pipeline depth 0 (Enrico Scholz)

2004-03-16  Thomas Vander Stichele  <thomas at apestaart dot org>

	* src/mach-helper.c: (check_file_allowed), (do_command):
          allow certain env vars to be passed through (patch from Enrico Scholz)

2004-03-16  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
          move creation of macros file to before build state check,
          so it always gets rebuilt
	* configure.in:
	* etc/Makefile.am:
	* etc/location:
	* etc/dist.d:
	* mach.spec.in:
          split up dist configuration file in location file with d/l
          locations, and dist.d dist definition directory

2004-03-16  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
          patch from Erik LaBianca to check for already satisfied
          buildrequires, and to strip rpmbuild() instead of (), so
          perl buildrequires can work

2004-03-16  Thomas Vander Stichele  <thomas at apestaart dot org>

	* mach.spec.in:
          patch from Erik LaBianca to umount proc before erasing

2004-03-12  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  use --promoteepoch if rpm supports it as an option; this allows
	  me to build packages on RH9 that use -devel packages without epochs

2004-03-11  Thomas Vander Stichele  <thomas at apestaart dot org>

	* configure.in:
	  bump nano to 1
	* scripts/mach.in:
          check for missing prep script before interpreting spec file

=== release 0.4.4 ===

2004-03-11  Thomas Vander Stichele  <thomas at apestaart dot org>

	* configure.ac: release 0.4.4, "Madrid"

2004-03-10  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: fix local "juist built" repository by moving
	  addition of it to create_sources_list

2004-03-05  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
          run a buildrequire check before building and after installing
          buildrequires, using the target root, but the host rpmbuild
          put back --nodeps for actual build

2004-03-04  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
          revert to clean build package list for each build if not asked
          to keep

2004-03-03  Thomas Vander Stichele  <thomas at apestaart dot org>

	* TODO:
          remove some, add one more
	* etc/conf.in:
	* configure.in:
          add options to specify buildroot
          autodetect for Fedora, RH7.0-9, YDL3
          allow for a flavor to be specified
	* scripts/mach.in:
          recreate sources.list before each apt-get update, so that
          changes to the root config are applied whenever needed

2004-03-02  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: verify if spec file is parsable in Spec.__init__

2004-03-01  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: fix snapshot of packages

2004-03-01  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
          fix removal of packages by using a split list of the packages to
          remove

2004-03-01  Thomas Vander Stichele  <thomas at apestaart dot org>

        * scripts/mach.in:
          - fix quoting issues so that
            mach build --target i686 --define "kernel 2.4.22" works
          - use the rpmbuild --define '__spec_prep_pre' hack to figure
            out n/v/r because --target is not understood by rpm -q --specfile
          - make all command functions take a list for arguments, instead of
            a string, so we save the argument splitting information correctly
          - warn when buildrequiring kernel or kernel-source, and remove them
            from the autoinstall.
          - use double quotes to wrap everything executed through shell -c


2004-02-28  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
          add a --no-scripts option to not run the postbuild scripts
          remove --nodeps from rpmbuild on spec file

2004-02-27  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/dist:
          remove gcc-c++ from "build" sets, I really want this in on a
          spec-by-spec basis
	* mach.spec.in:
          only output log once on succesful build
          more permission fixing

2004-02-27  Thomas Vander Stichele  <thomas at apestaart dot org>

	* mach.spec.in:
          fix permissions on mach directories to be SGID
	* README:
	* scripts/mach.in:
          run the script specified by script-success in the config dict
          after a successful build

2004-02-19  Ville Skyttä  <ville dot skytta at iki dot fi>

	* etc/dist: Add gcc-c++ to all "build" package sets.

2004-01-30  Thomas Vander Stichele  <thomas at apestaart dot org>

	* README:
	* etc/dist:
	  add RH80/9 with livna

2004-01-30  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/dist:
          add Fedora 1 Core with livna

2004-01-09  Ville Skyttä  <ville dot skytta at iki dot fi>

	* configure.in: Use AC_ARG_ENABLE instead of AC_ARG_WITH as it
	is semantically better for build options and makes the options
	actually work as documented.

	* Makefile.am: Enable bzip2'd dist tarball.
	* mach.spec.in: Use the bzip2'd tarball.

	* etc/dist: Add "file" to rh73/base.

2004-01-08  Thomas Vander Stichele  <thomas at apestaart dot org>

	* Makefile.am:
	* configure.in:
	* m4/Makefile.am: properly dist m4

2004-01-08  Ville Skyttä  <ville dot skytta at iki dot fi>

	* scripts/mach.in (main): Check for duplicate root/alias names.

	* scripts/mach.in (Spec.__init__): Allow whitespace before %define
	in specfile scan.

	* configure.in: Make default build user/group names configurable.
	* mach.spec.in: Ditto.
	* scripts/mach.in: Use build-time configured build user/group names.

	* Makefile.am (EXTRA_DIST): Include m4/*.m4.

	* mach.spec.in (build): Compile the package here.

2004-01-06  Thomas Vander Stichele  <thomas at apestaart dot org>

	* configure.in: bump nano to 1 for cvs development

2003-12-05  Enrico Scholz  <enrico.scholz@informatik.tu-chemnitz.de>

	* Makefile.am: Add ACLOCAL_AMFLAGS so the auto* system can be
	(re)created with "autoreconf -i -f".

2003-11-13  Enrico Scholz  <enrico.scholz@informatik.tu-chemnitz.de>

	* scripts/mach.in: Allow defining additional macros with
	config['macros'].

2003-12-27  Ville Skyttä  <ville dot skytta at iki dot fi>

	* scripts/mach.in: Make the rpmbuild command inside roots
	configurable using root_rpmbuild to support older distros which
	don't have "rpmbuild".
	* etc/dist: Set root_rpmbuild to "rpm" for SuSE 8.1 and 8.2.

	* scripts/mach.in (_setup_build): Ensure that /etc/rpm exists so
	copying our macros works as expected.

	* scripts/mach.in (rebuild): Don't bother resolving the order and
	interdependencies for packages from the CLI if only one is given;
	avoids one potentially troublesome "rpm --specfile" call.

2003-12-21  Ville Skyttä  <ville dot skytta at iki dot fi>

	* scripts/mach.in (rebuild): Don't fail if package has no build
	requirements.
	* etc/dist: Add Conectiva Linux 9.

2003-12-17  Ville Skyttä  <ville dot skytta at iki dot fi>

	* etc/dist: Add JPackage for Fedora Core 1.

=== release 0.4.3 ===

2003-12-16  Thomas Vander Stichele  <thomas at apestaart dot org>

	* configure.in: release 0.4.3, "Hot Water"

2003-12-11  Thomas Vander Stichele <thomas at apestaart dot org>

	* src/mach-helper.c: fix strstr comparison warnings
	* scripts/mach.in: try removing kernel from allowed duplicates
	to fix the "can't install kernel" problem for only one kernel

2003-12-11  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: catch CycleError and explain what happens

2003-12-11  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: also pass rpm build options to .src.rpm building

2003-12-11  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: applied patch from Panu Matilainen to add
	number of CPU's on host to rpmbuild incantation

2003-12-04  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/conf.in: rename default root to fedora-1-i386-core
	* etc/dist: add/fix fedora core 1 roots
	* scripts/mach.in: parse name/version/release based on rpm options

2003-12-02  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: Fix some code style issues

2003-12-01  Enrico Scholz  <enrico.scholz@informatik.tu-chemnitz.de>

	* scripts/mach.in: Add configurable hooks to different
	build phases.

2003-12-01  Ville Skyttä  <ville dot skytta at iki dot fi>

	* scripts/mach.in (rebuild): Prepend a dot to the string which is
	used to determine whether the release "disttag" already exists.

	* scripts/mach.in (build): Let SRPM build failure error fall
	through here.

2003-12-30  Enrico Scholz  <enrico.scholz@informatik.tu-chemnitz.de>

	* scripts/mach.in (rebuild): Raise an error instead of returning
	false when an SRPM build fails.

2003-11-29  Enrico Scholz  <enrico.scholz@informatik.tu-chemnitz.de>

	* scripts/mach.in (main): Add --canonify option; it outputs
	the canonical name of an (aliased) buildroot name.

	* scripts/mach.in (main): Give precedence to options specified
	on the command line over the ones in config files.

2003-11-29  Ville Skyttä  <ville dot skytta at iki dot fi>

	* etc/conf.in: Make fedora-1-i386 the default root.

	* scripts/mach.in (rebuild): Improve release mangling regexp,
	it is now less likely to mangle other stuff than the actual release
	tag, and tolerates trailing whitespace.

2003-11-21  Enrico Scholz  <enrico.scholz@informatik.tu-chemnitz.de>

	* scripts/mach.in: Some small corrections to fix the syntax
	highlighting in XEmacs' python mode.

2003-11-21  Paul Nasrat  <pauln at truemesh dot com>

	* scripts/mach.in (BuildRequires): Avoid TypeErrors for packages
	without build dependencies by returning an empty list instead of None.

2003-11-21  Ville Skyttä  <ville dot skytta at iki dot fi>

	* scripts/mach.in (rebuild): Use a login shell in order to get a
	sane vanilla environment (eg. /usr/X11R6/bin in $PATH).
	Kudos to Enrico Scholz.

2003-11-16  Ville Skyttä  <ville dot skytta at iki dot fi>

	* etc/dist: Add a bunch of aliases for RH 8.0 and 9 repos.

2003-11-13  Ville Skyttä  <ville dot skytta at iki dot fi>

	* etc/dist: Add Fedora Core 1, remove 0.9x betas.
	* etc/dist: Add fedora-rpmdevtools to fedora.us build packages,
	remove explicit gcc-c++ and redhat-rpm-config.

2003-10-21  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/dist: move initialization of config per dist to dist
	* etc/dist: add Fedora Core 0.95

2003-10-13  Ville Skyttä  <ville dot skytta at iki dot fi>

	* etc/dist: Make fedora(.us) repos for RH 8.0 and 9 inherit from
	updates, add gcc-c++ and redhat-rpm-config to build packages.

2003-10-06  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/dist: add sh-utils to 7.0 so su works
	* scripts/mach.in: make runs of apt-get from outside check for base

2003-10-06  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/dist: patch from Matthias Saou
	  - add RH70, RH71, RH72
	  - add YD23, YD30

2003-10-04  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  - make apt-get from command line run interactively
	  - get rid of file checks of tar files, it doesn't work on severn
	  - check for arguments on build and rebuild
	  - implemented "status" for all roots combined
	  - check for not properly built src.rpm
	  - change permissions on copied sources

2003-10-03  Thomas Vander Stichele  <thomas at apestaart dot org>

	* mach.spec.in: dirs permissions fixes
	* scripts/mach.in: unlock root on successful build
	* src/mach-helper.c: only refuse ".." in mach-helper
	* etc/dist: add Fedora Core 0.94

2003-09-17  Thomas Vander Stichele  <thomas at apestaart dot org>

	* mach.spec.in: fix up spec file

=== release 0.4.0 ===

2003-09-08  Thomas Vander Stichele  <thomas at apestaart dot org>

	* configure.ac: 0.4.0 release

2003-09-07  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	* etc/dist:
	  - allow shortcut aliases in -r, for example rh9

2003-09-07  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  - refactor splitargs code
	  - added KeyboardInterrupt to catch ctrl-c
	  - reinstate proc
	  - remove bootstrap checks and code
	  - make minimal and base targets
	  - remove consistency target
	  - check for su before chrooting
	* etc/dist: add/fix minimal, base and build package sets

2003-09-06  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: implemented -q, --quiet

2003-09-06  Thomas Vander Stichele  <thomas at apestaart dot org>

	* tests/*: start creating torture tests for mach

2003-09-06  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  - remove use agent for signing until we figure it out
	  - also copy and md5sum spec file to results dir

2003-08-17  Ville Skyttä  <ville dot skytta at iki dot fi>

	* etc/dist:
	  - Add JPackage configuration for RH 7.2 - 9.
	  - Use base URLs for easier configurability.

2003-08-17  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  - do tar.gz checking
	  - apt-get update before installing buildrequires

2003-08-16  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: fix %define scan

2003-08-13  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  - hack around spec file extraction from src.rpm
	  - filter out buildrequires: requiring package under build

2003-08-13  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in:
	  - fix KeyError catching for other errors
	  - fix KeyError in variable expansion

2003-08-13  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: reorder some build orders, should standardize
	this in general

2003-08-09  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/dist: removing all base and apt from Red Hat targets
	* scripts/mach.in:
	  - do more expansion of define'd variables in spec file
	  - mounting isn't done anymore, should be removed
	  - only recreate config file if it doesn't exist yet
	  - only mangle spec release if it doesn't match yet
	  - don't GPG check when installing to satisfy buildreqs

2003-08-09  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: clean up Axel Thimm's bits to make mach work
	without sets of base/apt packages

2003-08-09  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: add _bruteclean to use mach-helper to remove
	a root in case it can't remove itself

2003-08-07  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: don't fail unlock if not locked
	* src/mach-helper.c: print out root files should be under when failing

2003-08-01  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: various small fixes from Axel Thimm

2003-08-01  Thomas Vander Stichele  <thomas at apestaart dot org>

	* mach.spec.in: patch from Axel Thimm to fix small issues

2003-07-24  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: use machbuild in place of mach inside build root

2003-07-18  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: fix case when src.rpm/spec has no BuildRequires:

2003-07-15  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: pass on options from build/rebuild to rpmbuild

2003-07-15  Thomas Vander Stichele  <thomas at apestaart dot org>

	* configure.in:
	* scripts/mach.in: check for suidness of mach-helper binary

2003-07-10  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/dist: added pam rpm to base of rh72 dists so that shell utils
	work

2003-06-21  Ville Skyttä  <ville dot skytta at iki dot fi>

	* etc/dist:
	Move build packages here instead of hardcoding them in mach.
	* scripts/mach.in (_setup_build): Ditto.

	* etc/dist: Add SuSE 8.1 and 8.2 configs.

2003-06-20  Ville Skyttä  <ville dot skytta at iki dot fi>

	* scripts/mach.in (BuildRequires): Fix BuildRequires filtering.

2003-06-06  Ville Skyttä  <ville dot skytta at iki dot fi>

	* etc/dist: Add sh-utils to redhat-72-i386* and redhat-73-i386
	base packages in order to be able to 'su' in the chroot.

2003-06-04  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/conf.in: initialize dist-specific configs
	* scripts/mach.in: use gpg-agent to clearsign, sign all packages 
	in one go, delete old signed md5sums

2003-06-03  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: implement config[target] specific config,
	remove chrootcmds, implement release mangling with --release
	* etc/conf.in: remove chrootcmds, add release mangling for fedora

2003-06-03  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: fix some places where / was forgotten now that
	$HOME is set, clear RPM::Pre-Install-Pkgs so GPG's aren't checked
	* src/mach-helper.c (do_command): added HOME env var because fc-cache
	segfaults if it's not set

2003-06-02  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: added signing and collecting of packages

2003-05-29  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: fix setup not handling arg properly

2003-05-25  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: do proper build ordering by parsing specfiles
	for their generated results

2003-05-24  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: lots of bugfixes


	* src/mach-helper.c: created
	* scripts/mach.in: make use of mach-helper

2003-05-21  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/Makefile.am: reworked config
	* etc/apt: reworked config
	* etc/conf.in: reworked config
	* etc/packages: reworked config
	* scripts/mach.in: reworked large parts, started objectifying Root,
	use host's apt and rpm to manipulate root packages

2003-05-13  Thomas Vander Stichele  <thomas at apestaart dot org>

	* scripts/mach.in: use rpm2cpio to extract an rpm matching the target
	platform to install packages with.  This also uses a nasty chroot
	hack, so this ought to be thought through.

2003-05-12  Ville Skyttä  <ville dot skytta at iki dot fi>

	* scripts/mach.in:
	Don't exit from setup_consistency if the commands succeed :)
	Use the -H argument to sudo for better non-root experience.
	Fix unlock target by introducing a dummy 2nd argument.

	* etc/packages:
	* scripts/mach.in:
	Implement configurable per-distro build packages, and add
	Fedora ones to default packages config.

2003-05-12  Thomas Vander Stichele  <thomas at apestaart dot org>

	* configure.in:
	* etc/Makefile.am:
	* etc/conf:
	* etc/conf.in: autogenerate conf from conf.in
	* mach.spec.in: make all dirs FHS-compliant
	* scripts/mach.in: make all dirs FHS-compliant

2003-05-12  Thomas Vander Stichele  <thomas at apestaart dot org>

	* etc/conf: add /usr/bin/apt-sigchecker as generated files, default
	to letting everything pass
	* scripts/mach.in: add function to regenerate any file in
	config['files'] and use it for apt-sigchecker

2003-05-12  Thomas Vander Stichele  <thomas at apestaart dot org>

	* add global /bin/bash -c '...' wrapping
	* use LD_ASSUME_KERNEL=2.2.5 for any installing/querying;
	this ought to be configurable somehow

2003-05-11  Ville Skyttä  <ville dot skytta at iki dot fi>

	* Force queryformat for rpm -q, users may have customized formats
	which will confuse mach.
	* Add (X)Emacs python mode cookies to config files.

2003-05-09  Thomas Vander Stichele  <thomas at apestaart dot org>

	* added .machrc in home dir parsing

2003-05-09  Ville Skyttä  <ville dot skytta at iki dot fi>

	* Use apt's "rpm-dir" indextype to create a local mini-repo inside the 
	chroot.  This way, we can install the binary packages and their
	dependencies just by doing a "apt-get install foo".
	* Put all URL retrieval operations into a new urlgrab function, which
	tries to preserve timestamps of the downloads.
	* Use shutil.copy2 instead of copy, again for preserving timestamps.
	* Add --clean to rpmbuild --rebuild.

2003-05-09  Thomas Vander Stichele  <thomas at apestaart dot org>

	* added ASCII spinner themes
	* add more dists and rework config file for it
	* make each root download in a different packages dir

2003-05-02  Thomas Vander Stichele  <thomas at apestaart dot org>

	* implemented a progress indicator as output
	* implemented snapshot of "build" target with auto-return to it
	on setup build

2003-04-30  Thomas Vander Stichele  <thomas at apestaart dot org>

	* rewrite in python
